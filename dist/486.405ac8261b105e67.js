"use strict";(self.webpackChunksort_applicants=self.webpackChunksort_applicants||[]).push([[486],{4486:(le,f,l)=>{l.r(f),l.d(f,{default:()=>ae});var C=l(5637),p=l(1326),d=l(7847),e=l(5879),x=l(4586),T=l(7700),c=l(6223),Z=l(5457),v=l(1896),D=l(4190),J=l(7704),A=l(247),O=l(21),u=l(6814),q=l(220),g=l(5399),E=l(617),P=l(3999);function U(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addJobDescription())}),e._UZ(1,"i",5),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&o&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Add")," "))}function y(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.generateResults())}),e._UZ(1,"i",5),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&o&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Generate Results")," "))}function M(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.revertResults())}),e._UZ(1,"i",5),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&o&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Cancel Results")," "))}function S(o,r){if(1&o&&(e.TgZ(0,"span",43),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(t.selectedFileName)}}function F(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",36)(1,"label",37)(2,"input",38),e.NdJ("change",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.onFileSelected(n))}),e.qZA(),e._UZ(3,"i",39),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"div"),e.YNc(7,S,2,1,"span",40),e.qZA()(),e.TgZ(8,"button",41),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.importJobDescriptions())}),e._UZ(9,"i",42),e._uU(10),e.ALo(11,"translate"),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,3,"Choose File")," "),e.xp6(3),e.Q6J("ngIf",t.selectedFileName),e.xp6(3),e.hij(" ",e.lcZ(11,5,"Import Data")," ")}}function L(o,r){1&o&&(e.TgZ(0,"a",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Search Filter")))}function I(o,r){if(1&o&&(e.TgZ(0,"option",56),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(e.lcZ(2,2,t.label))}}function N(o,r){if(1&o&&(e.TgZ(0,"select",54)(1,"option",55),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,I,3,4,"option",29),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("id",t.name)("formControlName",t.name),e.xp6(2),e.Oqu(e.lcZ(3,4,"Select "+t.label)),e.xp6(2),e.Q6J("ngForOf",t.options)}}function w(o,r){if(1&o&&(e.TgZ(0,"div",51)(1,"label",52),e._uU(2),e.ALo(3,"translate"),e.ALo(4,"titlecase"),e.qZA(),e.YNc(5,N,5,6,"select",53),e.qZA()),2&o){const t=r.$implicit,i=e.oxw(2);e.xp6(1),e.s9C("for",t.name),e.xp6(1),e.Oqu(e.lcZ(3,3,e.lcZ(4,5,t.label))),e.xp6(3),e.Q6J("ngIf",i.searchForm.get(t.name))}}function Q(o,r){if(1&o&&(e.TgZ(0,"div",51)(1,"label",52),e._uU(2),e.ALo(3,"translate"),e.ALo(4,"titlecase"),e.qZA(),e._UZ(5,"input",57),e.ALo(6,"translate"),e.ALo(7,"titlecase"),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.s9C("for",t.name),e.xp6(1),e.Oqu(e.lcZ(3,5,e.lcZ(4,7,t.label))),e.xp6(3),e.s9C("formControlName",t.name),e.Q6J("id",t.name)("placeholder",e.lcZ(6,9,e.lcZ(7,11,t.label)))}}function R(o,r){if(1&o&&(e.TgZ(0,"option",56),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(e.lcZ(2,2,t.label))}}function k(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",59),e._UZ(2,"input",61),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",59),e._UZ(5,"input",62),e.ALo(6,"translate"),e.qZA(),e.BQk()),2&o){const t=e.oxw(2).$implicit;e.xp6(2),e.s9C("placeholder",e.lcZ(3,4,"From")),e.Q6J("id","from-"+t.name),e.xp6(3),e.s9C("placeholder",e.lcZ(6,6,"To")),e.Q6J("id","to-"+t.name)}}function j(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",63),e._UZ(2,"input",64),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&o){const t=e.oxw(2).$implicit;e.xp6(2),e.Q6J("id",t.name)("placeholder",e.lcZ(3,2,t.label))}}function Y(o,r){if(1&o&&(e.ynx(0),e.YNc(1,k,7,8,"ng-container",60),e.YNc(2,j,4,4,"ng-container",60),e.BQk()),2&o){const t=e.oxw().$implicit,i=e.oxw(2);let n,a,s,_;e.xp6(1),e.Q6J("ngIf","range"===(null==(n=i.searchForm.get(t.name))||null==(a=n.get("condition"))?null:a.value)),e.xp6(1),e.Q6J("ngIf","range"!==(null==(s=i.searchForm.get(t.name))||null==(_=s.get("condition"))?null:_.value))}}function K(o,r){if(1&o&&(e.TgZ(0,"div",58)(1,"label",52),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",0)(5,"div",59)(6,"select",54),e.YNc(7,R,3,4,"option",29),e.qZA()(),e.YNc(8,Y,3,2,"ng-container",60),e.qZA()()),2&o){const t=r.$implicit,i=e.oxw(2);let n;e.Q6J("formGroupName",t.name),e.xp6(1),e.s9C("for",t.name),e.xp6(1),e.Oqu(e.lcZ(3,7,t.label)),e.xp6(4),e.Q6J("id",t.name+"-condition")("formControlName","condition"),e.xp6(1),e.Q6J("ngForOf",t.conditions),e.xp6(1),e.Q6J("ngIf",null==(n=i.searchForm.get(t.name))?null:n.get("condition"))}}function G(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"app-card",1),e.ALo(1,"translate"),e.TgZ(2,"div",0)(3,"div",45)(4,"form",46),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onSubmit())}),e.TgZ(5,"div",0),e.YNc(6,w,6,7,"div",47),e.YNc(7,Q,8,13,"div",47),e.YNc(8,K,9,9,"div",48),e.TgZ(9,"div",49)(10,"button",50),e._uU(11),e.ALo(12,"translate"),e.qZA()()()()()()()}if(2&o){const t=e.oxw();e.s9C("cardTitle",e.lcZ(1,7,"Search Filter")),e.Q6J("options",!1),e.xp6(4),e.Q6J("formGroup",t.searchForm),e.xp6(2),e.Q6J("ngForOf",t.searchFields),e.xp6(1),e.Q6J("ngForOf",t.stringFields),e.xp6(1),e.Q6J("ngForOf",t.numericFields),e.xp6(3),e.Oqu(e.lcZ(12,9,"Submit"))}}const m=function(o){return{sorted:o}};function B(o,r){if(1&o&&(e.TgZ(0,"mat-icon",67),e._uU(1,"keyboard_arrow_up"),e.qZA()),2&o){const t=e.oxw(2).$implicit,i=e.oxw();e.Q6J("ngClass",e.VKq(1,m,i.sortedColumn===t.name&&null!==i.sortOrder))}}function $(o,r){if(1&o&&(e.TgZ(0,"mat-icon",67),e._uU(1,"keyboard_arrow_down"),e.qZA()),2&o){const t=e.oxw(2).$implicit,i=e.oxw();e.Q6J("ngClass",e.VKq(1,m,i.sortedColumn===t.name&&null!==i.sortOrder))}}function W(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"th",65),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,a=e.oxw();return e.KtG(n.sortable?a.sortColumn(n.name):"")}),e._uU(2),e.ALo(3,"translate"),e.YNc(4,B,2,3,"mat-icon",66),e.YNc(5,$,2,3,"mat-icon",66),e.qZA(),e.BQk()}if(2&o){const t=e.oxw().$implicit,i=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,3,t.label)," "),e.xp6(2),e.Q6J("ngIf",t.sortable&&"asc"===i.sortOrder),e.xp6(1),e.Q6J("ngIf",t.sortable&&"desc"===i.sortOrder)}}function z(o,r){if(1&o&&(e.TgZ(0,"mat-icon",67),e._uU(1,"keyboard_arrow_up"),e.qZA()),2&o){const t=e.oxw(3).$implicit,i=e.oxw();e.Q6J("ngClass",e.VKq(1,m,i.sortedColumn===t.name&&null!==i.sortOrder))}}function H(o,r){if(1&o&&(e.TgZ(0,"mat-icon",67),e._uU(1,"keyboard_arrow_down"),e.qZA()),2&o){const t=e.oxw(3).$implicit,i=e.oxw();e.Q6J("ngClass",e.VKq(1,m,i.sortedColumn===t.name&&null!==i.sortOrder))}}function V(o,r){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.YNc(3,z,2,3,"mat-icon",66),e.YNc(4,H,2,3,"mat-icon",66),e.qZA()),2&o){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,3,t.label)," "),e.xp6(2),e.Q6J("ngIf",t.sortable&&"asc"===i.sortOrder),e.xp6(1),e.Q6J("ngIf",t.sortable&&"desc"===i.sortOrder)}}function X(o,r){if(1&o&&(e.ynx(0),e.YNc(1,V,5,5,"th",60),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","Admin"===t.role||"User"===t.role&&1===t.permissions.deleteJobDescription)}}function ee(o,r){if(1&o&&(e.ynx(0),e.YNc(1,W,6,5,"ng-container",60),e.YNc(2,X,2,1,"ng-container",60),e.BQk()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf","Delete"!==t.label),e.xp6(1),e.Q6J("ngIf","Delete"===t.label)}}function te(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"td")(1,"i",71),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,a=e.oxw();return e.KtG(a.deleteRecord(n.id))}),e.qZA()()}}function ne(o,r){if(1&o&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.general)}}function oe(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"input",68),e.NdJ("change",function(n){const s=e.CHM(t).$implicit,_=e.oxw();return e.KtG(_.toggleSelection(n,s.id))}),e.qZA()(),e.TgZ(3,"td")(4,"div",69)(5,"div",8),e._UZ(6,"div"),e.qZA()()(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"td")(13,"i",70),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.showDetails(a.id))}),e.qZA()(),e.YNc(14,te,2,0,"td",60),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.qZA(),e.TgZ(27,"td"),e._uU(28),e.qZA(),e.TgZ(29,"td"),e._uU(30),e.qZA(),e.TgZ(31,"td"),e._uU(32),e.qZA(),e.YNc(33,ne,2,1,"ng-template"),e.TgZ(34,"td"),e._uU(35),e.qZA(),e.TgZ(36,"td"),e._uU(37),e.qZA(),e.TgZ(38,"td"),e._uU(39),e.qZA(),e.TgZ(40,"td"),e._uU(41),e.qZA(),e.TgZ(42,"td"),e._uU(43),e.qZA()()}if(2&o){const t=r.$implicit,i=e.oxw();e.xp6(2),e.Q6J("checked",i.isSelected(t.id)),e.xp6(4),e.ekj("red",i.isRed(t))("orange",i.isOrange(t))("green",i.isGreen(t)),e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(e.lcZ(11,24,i.getStatusString(t.status))),e.xp6(4),e.Q6J("ngIf","Admin"===i.role||"User"===i.role&&1===i.permissions.deleteJobDescription),e.xp6(2),e.Oqu(i.getCategoryString(t.category)),e.xp6(2),e.Oqu(t.public_entity),e.xp6(2),e.Oqu(t.sub_entity),e.xp6(2),e.Oqu(t.governorate),e.xp6(2),e.Oqu(t.job_title),e.xp6(2),e.Oqu(t.work_centers),e.xp6(2),e.Oqu(t.assignees),e.xp6(2),e.Oqu(t.vacancies),e.xp6(2),e.Oqu(t.card_number),e.xp6(3),e.Oqu(t.record_entry),e.xp6(2),e.Oqu(t.entry_date),e.xp6(2),e.Oqu(t.last_modifier),e.xp6(2),e.Oqu(t.modification_date),e.xp6(2),e.Oqu(t.audited_by)}}function ie(o,r){if(1&o&&(e.TgZ(0,"option",56),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}const ae=(()=>{class o{constructor(t,i,n,a,s,_,b,h,re,se){this.JobDescription=t,this.dialog=i,this.fb=n,this.translate=a,this.router=s,this.sharedService=_,this.governorateService=b,this.generateResult=h,this.excelService=re,this.authService=se,this.jobDescriptions=[],this.governorateOptions=[],this.categoryOptions=[],this.selectedJobIds=[],this.numericFields=[{name:"id",label:"ID",conditions:[{value:"equals",label:"Equals"},{value:"greater_than",label:"Greater Than"},{value:"less_than",label:"Less Than"},{value:"greater_than_or_equal",label:"Greater Than or Equal To"},{value:"less_than_or_equal",label:"Less Than or Equal To"},{value:"range",label:"Range"}]},{name:"work_centers",label:"Work Centers",conditions:[{value:"equals",label:"Equals"},{value:"greater_than",label:"Greater Than"},{value:"less_than",label:"Less Than"},{value:"greater_than_or_equal",label:"Greater Than or Equal To"},{value:"less_than_or_equal",label:"Less Than or Equal To"},{value:"range",label:"Range"}]},{name:"assignees",label:"Assignees",conditions:[{value:"equals",label:"Equals"},{value:"greater_than",label:"Greater Than"},{value:"less_than",label:"Less Than"},{value:"greater_than_or_equal",label:"Greater Than or Equal To"},{value:"less_than_or_equal",label:"Less Than or Equal To"},{value:"range",label:"Range"}]},{name:"vacancies",label:"Vacancies",conditions:[{value:"equals",label:"Equals"},{value:"greater_than",label:"Greater Than"},{value:"less_than",label:"Less Than"},{value:"greater_than_or_equal",label:"Greater Than or Equal To"},{value:"less_than_or_equal",label:"Less Than or Equal To"},{value:"range",label:"Range"}]},{name:"card_number",label:"Card Number",conditions:[{value:"equals",label:"Equals"},{value:"greater_than",label:"Greater Than"},{value:"less_than",label:"Less Than"},{value:"greater_than_or_equal",label:"Greater Than or Equal To"},{value:"less_than_or_equal",label:"Less Than or Equal To"},{value:"range",label:"Range"}]}],this.stringFields=[{name:"status",label:"Status"},{name:"public_entity",label:"Public_Entity"},{name:"sub_entity",label:"Sub_Entity"},{name:"job_title",label:"Job_Title"},{name:"record_entry",label:"Record_Entry"},{name:"last_modified",label:"Last Modified"},{name:"audited_by",label:"Audited_By"}],this.searchFields=[{name:"category",label:"Category",options:[]},{name:"governorate",label:"Governorate",options:[]}],this.columnData=[{name:"",label:"",sortable:!1},{name:"id",label:"ID",sortable:!0},{name:"status",label:"Status",sortable:!0},{name:"details",label:"Details",sortable:!1},{name:"delete",label:"Delete",sortable:!1},{name:"category",label:"Category",sortable:!0},{name:"public_entity",label:"Public Entity",sortable:!0},{name:"sub_entity",label:"Sub Entity",sortable:!0},{name:"governorate",label:"Governorate",sortable:!0},{name:"job_title",label:"Job Title",sortable:!0},{name:"work_centers",label:"Work Centers",sortable:!0},{name:"assignees",label:"Separated Count",sortable:!0},{name:"vacancies",label:"Vacancies Count",sortable:!0},{name:"card_number",label:"Card Number",sortable:!0},{name:"general",label:"Specialization",sortable:!0},{name:"record_entry",label:"Record Entry",sortable:!0},{name:"entry_date",label:"Entry Date",sortable:!0},{name:"last_modifier",label:"Last Modifier",sortable:!0},{name:"modification_date",label:"Modification Date",sortable:!0},{name:"audited_by",label:"Verified by",sortable:!0}],this.currentPage=1,this.pageSizeSelected=5,this.pageSizes=[5,10,25,50,100],this.sortedColumn="",this.sortOrder="asc",this.file=null,this.selectedFileName=null}ngOnInit(){this.initForm(),this.jobDescriptionTable(),this.translate.setLanguage(localStorage.getItem("i18nextLng")),this.categoryOptions=Object.keys(d.WD).map(t=>({value:d.WD[t],label:this.sharedService.getCategoryString(d.WD[t])})),this.searchFields.find(t=>"category"===t.name).options=this.categoryOptions,this.governorateService.getGovernorateData().subscribe(t=>{this.governorateOptions=t.data.map(n=>({value:n.name,label:n.name})),this.searchFields.find(n=>"governorate"===n.name).options=this.governorateOptions}),this.role=localStorage.getItem("role"),this.permissions=this.authService.permissionsService()}jobDescriptionTable(){this.JobDescription.jobDescriptionTableData().subscribe(t=>{this.jobDescriptions=t,this.calculateTotalPages()})}initForm(){const t={};this.numericFields.forEach(s=>{t[s.name]=this.fb.group({condition:[s.conditions[0].value],min:[null],max:[null],value:[null]})});const i={};this.stringFields.forEach(s=>{i[s.name]=[null]});const n={};this.searchFields.forEach(s=>{n[s.name]=[null]});const a={...t,...i,...n};this.searchForm=this.fb.group(a),this.searchForm.patchValue({category:"",governorate:""})}paginateData(){const t=(this.currentPage-1)*this.pageSizeSelected,i=Math.min(t+this.pageSizeSelected,this.jobDescriptions.length);return this.jobDescriptions.slice(t,i)}previousPage(){this.currentPage>1&&this.currentPage--}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}firstPage(){this.currentPage=1}lastPage(){this.currentPage=this.totalPages}getRange(){const t=(this.currentPage-1)*this.pageSizeSelected+1;return`${t} - ${Math.min(t+this.pageSizeSelected-1,this.jobDescriptions.length)}`}changePageSize(t){this.pageSizeSelected=t,this.currentPage=1,this.calculateTotalPages()}calculateTotalPages(){this.totalPages=Math.ceil(this.jobDescriptions.length/this.pageSizeSelected)}sortColumn(t){this.sortedColumn===t?this.sortOrder="asc"===this.sortOrder?"desc":"asc":(this.sortOrder="asc",this.sortedColumn=t),this.jobDescriptions.sort((i,n)=>"number"==typeof i[t]&&"number"==typeof n[t]?"asc"===this.sortOrder?i[t]-n[t]:n[t]-i[t]:"asc"===this.sortOrder?i[t].localeCompare(n[t]):n[t].localeCompare(i[t]))}showDetails(t){this.router.navigate(["/basic/job-description-details",t])}addJobDescription(){this.router.navigate(["/basic/job-description-details"])}deleteRecord(t){this.dialog.open(p.z,{position:{top:"10px",left:"10px"},data:{message:"Are you sure you want to delete this record ?"}}).afterClosed().subscribe(n=>{n&&this.JobDescription.jobDescriptionTableDataDeletesolo(t).subscribe(a=>{a&&this.jobDescriptionTable()})})}onSubmit(){const t=this.searchForm.getRawValue(),n={};this.numericFields.forEach(a=>{const s=t[a.name]?.condition,_=t[a.name]?.min,b=t[a.name]?.max,h=t[a.name]?.value;s&&("range"!==s||null===_&&null===b?"range"!==s&&null!==h&&(n[a.name]={condition:s,value:h}):n[a.name]={condition:s,value:{min:_,max:b}})}),this.stringFields.forEach(a=>{const s=t[a.name];s&&(n[a.name]=s)}),this.searchFields.forEach(a=>{const s=t[a.name];s&&(n[a.name]=s)}),this.JobDescription.jobDescriptionTableData({...n}).subscribe(a=>{this.jobDescriptions=a})}getCategoryString(t){return this.sharedService.getCategoryString(t)}getStatusString(t){return this.sharedService.getStatusString(t)}isRed(t){return 0===t.assignees}isOrange(t){return t.assignees>0&&t.assignees<t.vacancies}isGreen(t){return t.assignees===t.vacancies}generateResults(){this.dialog.open(p.z,{position:{top:"10px",left:"10px"},data:{message:"Are you sure you want to generate results ?",flag:!0}}).afterClosed().subscribe(i=>{i&&this.generateResult.generateResults().subscribe(n=>{n&&this.jobDescriptionTable()})})}revertResults(){this.dialog.open(p.z,{position:{top:"10px",left:"10px"},data:{message:"Are you sure you want to revert results ?",flag:!0}}).afterClosed().subscribe(i=>{i&&this.generateResult.cancelResults().subscribe(n=>{n&&this.jobDescriptionTable()})})}exportJobDescription(){this.excelService.exportJobDescriptionExcel().subscribe(t=>{this.downloadFile(t)})}exportJobDescriptionHeaders(){this.excelService.exportJobDescriptionHeader().subscribe(t=>{this.downloadFile(t)})}onFileSelected(t){this.file=t.target.files[0],this.selectedFileName=this.file?this.file.name:null}importJobDescriptions(){this.file?this.excelService.importJobDescriptionHeader(this.file).subscribe(()=>{this.jobDescriptionTable(),this.file=null,this.selectedFileName=null},t=>{console.error("Error importing job descriptions:",t)}):console.error("No file selected")}downloadFile(t){const i=document.createElement("a");i.href=window.URL.createObjectURL(t),i.download="job_descriptions_data.xlsx",i.click()}selectAll(t){this.selectedJobIds=t.target.checked?this.jobDescriptions.map(n=>n.id):[]}toggleSelection(t,i){t.target.checked?this.selectedJobIds.push(i):this.selectedJobIds=this.selectedJobIds.filter(a=>a!==i)}isSelected(t){return this.selectedJobIds.includes(t)}deleteSelected(){0!==this.selectedJobIds.length&&this.dialog.open(p.z,{position:{top:"10px",left:"10px"},data:{message:"Are you sure you want to delete selected job descriptions?"}}).afterClosed().subscribe(i=>{i&&this.JobDescription.jobDescriptionTableDataDelete(this.selectedJobIds).subscribe(n=>{n&&(this.selectedJobIds=[],this.jobDescriptionTable())})})}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(x.R),e.Y36(T.uw),e.Y36(c.qu),e.Y36(Z.D),e.Y36(v.F0),e.Y36(d.F1),e.Y36(D.y),e.Y36(J.v),e.Y36(A.x),e.Y36(O.e))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-job-description"]],standalone:!0,features:[e.jDz],decls:71,vars:34,consts:[[1,"row"],[3,"cardTitle","options"],[1,"header"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"feather","icon-thumbs-up"],["class","d-flex align-items-center",4,"ngIf"],[1,"circles","mt-auto","mb-auto"],[1,"d-flex"],[1,"red"],[1,"d-flex",2,"margin-left","20px"],[1,"green"],[1,"orange"],[1,"card"],["activeIds","static-2",3,"closeOthers"],["id","static-1"],["ngbPanelTitle",""],["ngbPanelContent",""],[1,"table-responsive"],[1,"table"],["type","checkbox",3,"change"],[1,"fas","fa-trash-alt","icon-position",3,"click"],[4,"ngFor","ngForOf"],[1,"pagination-controls","d-flex","justify-content-between"],[1,"d-flex","row"],[1,"col-md-auto","mt-auto","mb-auto"],[1,"",2,"width","100%"],[1,"col-md-auto"],[1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-auto","mb-auto"],[1,"border-0","fs-4","bg-transparent",3,"disabled","click"],[1,"fa","fa-angle-double-left"],[1,"fa","fa-angle-left","bg-transparent"],[1,"fa","fa-angle-right"],[1,"fa","fa-angle-double-right"],[1,"d-flex","align-items-center"],[1,"btn","btn-primary","btn-file"],["type","file","accept",".xlsx,.xls",2,"display","none",3,"change"],[1,"feather","icon-upload"],["class","ml-2",4,"ngIf"],["type","button",1,"btn","btn-success","ml-2",3,"click"],[1,"feather","icon-download"],[1,"ml-2"],["href","javascript:"],[1,"col-md-12"],[3,"formGroup","ngSubmit"],["class","col-md-6 form-group",4,"ngFor","ngForOf"],["class","col-md-6 form-group",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-md-12","button-style"],["type","submit",1,"btn","btn-primary"],[1,"col-md-6","form-group"],[3,"for"],["class","form-control",3,"id","formControlName",4,"ngIf"],[1,"form-control",3,"id","formControlName"],["value","","selected",""],[3,"value"],["type","text",1,"form-control",3,"id","placeholder","formControlName"],[1,"col-md-6","form-group",3,"formGroupName"],[1,"col-md-4"],[4,"ngIf"],["type","number","formControlName","min",1,"form-control",3,"id","placeholder"],["type","number","formControlName","max",1,"form-control",3,"id","placeholder"],[1,"col-md-8"],["type","number","formControlName","value",1,"form-control",3,"id","placeholder"],[2,"cursor","pointer","position","relative",3,"click"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["type","checkbox",3,"checked","change"],[1,"circles","padding-top"],[1,"fas","fa-info-circle",3,"click"],[1,"fas","fa-trash-alt",3,"click"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"app-card",1),e.ALo(2,"translate"),e.TgZ(3,"div",2),e.YNc(4,U,4,3,"button",3),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.exportJobDescription()}),e._UZ(6,"i",5),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"button",4),e.NdJ("click",function(){return n.exportJobDescriptionHeaders()}),e._UZ(10,"i",5),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.YNc(13,y,4,3,"button",3),e.YNc(14,M,4,3,"button",3),e.YNc(15,F,12,7,"div",6),e.TgZ(16,"div",7)(17,"div",8),e._UZ(18,"div",9),e.TgZ(19,"span"),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",10),e._UZ(23,"div",11),e.TgZ(24,"span"),e._uU(25),e.ALo(26,"translate"),e.qZA()(),e.TgZ(27,"div",10),e._UZ(28,"div",12),e.TgZ(29,"span"),e._uU(30),e.ALo(31,"translate"),e.qZA()()()(),e._UZ(32,"br")(33,"hr"),e.TgZ(34,"div",13)(35,"ngb-accordion",14)(36,"ngb-panel",15),e.YNc(37,L,3,3,"ng-template",16),e.YNc(38,G,13,11,"ng-template",17),e.qZA()()(),e._UZ(39,"br"),e.TgZ(40,"div",18)(41,"table",19)(42,"thead")(43,"tr")(44,"th")(45,"input",20),e.NdJ("change",function(s){return n.selectAll(s)}),e.qZA(),e.TgZ(46,"i",21),e.NdJ("click",function(){return n.deleteSelected()}),e.qZA()(),e.YNc(47,ee,3,2,"ng-container",22),e.qZA()(),e.TgZ(48,"tbody"),e.YNc(49,oe,44,26,"tr",22),e.qZA()()(),e.TgZ(50,"div",23)(51,"div",24)(52,"div",25)(53,"span",26),e._uU(54,"Items Per Page:"),e.qZA()(),e.TgZ(55,"div",27)(56,"select",28),e.NdJ("ngModelChange",function(s){return n.pageSizeSelected=s})("change",function(){return n.changePageSize(n.pageSizeSelected)}),e.YNc(57,ie,2,2,"option",29),e.qZA()()(),e.TgZ(58,"div",0)(59,"div",25)(60,"span",30),e._uU(61),e.qZA()(),e.TgZ(62,"div",25)(63,"button",31),e.NdJ("click",function(){return n.firstPage()}),e._UZ(64,"i",32),e.qZA(),e.TgZ(65,"button",31),e.NdJ("click",function(){return n.previousPage()}),e._UZ(66,"i",33),e.qZA(),e.TgZ(67,"button",31),e.NdJ("click",function(){return n.nextPage()}),e._UZ(68,"i",34),e.qZA(),e.TgZ(69,"button",31),e.NdJ("click",function(){return n.lastPage()}),e._UZ(70,"i",35),e.qZA()()()()()()),2&i&&(e.xp6(1),e.s9C("cardTitle",e.lcZ(2,22,"Job Description")),e.Q6J("options",!1),e.xp6(3),e.Q6J("ngIf","Admin"===n.role||"User"===n.role&&1===n.permissions.addJobDescription),e.xp6(3),e.hij(" ",e.lcZ(8,24,"Print")," "),e.xp6(4),e.hij(" ",e.lcZ(12,26,"Export Template")," "),e.xp6(2),e.Q6J("ngIf","Admin"===n.role||"User"===n.role&&1===n.permissions.sortable),e.xp6(1),e.Q6J("ngIf","Admin"===n.role||"User"===n.role&&1===n.permissions.sortable),e.xp6(1),e.Q6J("ngIf","Admin"===n.role||"User"===n.role&&1===n.permissions.addJobDescription),e.xp6(5),e.Oqu(e.lcZ(21,28,"Not Sorted")),e.xp6(5),e.Oqu(e.lcZ(26,30,"Sorted")),e.xp6(5),e.Oqu(e.lcZ(31,32,"Partially Sorted")),e.xp6(5),e.Q6J("closeOthers",!0),e.xp6(12),e.Q6J("ngForOf",n.columnData),e.xp6(2),e.Q6J("ngForOf",n.paginateData()),e.xp6(7),e.Q6J("ngModel",n.pageSizeSelected),e.xp6(1),e.Q6J("ngForOf",n.pageSizes),e.xp6(4),e.AsE("",n.getRange()," of ",n.jobDescriptions.length,""),e.xp6(2),e.Q6J("disabled",1===n.currentPage),e.xp6(2),e.Q6J("disabled",1===n.currentPage),e.xp6(2),e.Q6J("disabled",n.currentPage===n.totalPages),e.xp6(2),e.Q6J("disabled",n.currentPage===n.totalPages))},dependencies:[C.m,u.mk,u.sg,u.O5,c._Y,c.YN,c.Kr,c.Fj,c.wV,c.EJ,c.JJ,c.JL,c.On,c.sg,c.u,c.x0,q.A,g.gY,g.Gk,g.Cu,g.gW,E.Hw,u.rS,P.X$],styles:[".circles[_ngcontent-%COMP%]{display:flex}.circles[_ngcontent-%COMP%]   .red[_ngcontent-%COMP%]{background-color:red;width:15px;height:15px;border-radius:14px}.circles[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{background-color:green;width:15px;height:15px;border-radius:14px}.circles[_ngcontent-%COMP%]   .orange[_ngcontent-%COMP%]{background-color:orange;width:15px;height:15px;border-radius:14px}.circles[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:1rem;color:#000}.header[_ngcontent-%COMP%]{display:flex}.header[_ngcontent-%COMP%]   .circles[_ngcontent-%COMP%]{margin-left:5rem}th[_ngcontent-%COMP%]{position:relative;cursor:pointer}th[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{opacity:1}mat-icon[_ngcontent-%COMP%]{font-size:16px;vertical-align:middle;position:absolute;opacity:0;transition:opacity .3s ease}mat-icon.sorted[_ngcontent-%COMP%]{opacity:1}.padding-top[_ngcontent-%COMP%]{padding-top:.1rem}.icon-position[_ngcontent-%COMP%]{position:relative;left:15px;bottom:2px}"]})}return o})()}}]);