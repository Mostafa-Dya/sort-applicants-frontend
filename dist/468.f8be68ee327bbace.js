"use strict";(self.webpackChunksort_applicants=self.webpackChunksort_applicants||[]).push([[468],{7468:(ue,b,r)=>{r.r(b),r.d(b,{default:()=>ce});var _=r(6814),A=r(5637),d=r(1326),c=r(6223),u=r(7847),e=r(5879),x=r(7700),Z=r(5457),v=r(9006),T=r(1896),C=r(4190),O=r(7704),q=r(247),E=r(21),P=r(3831),U=r(220),g=r(5399),S=r(617),y=r(3999);function M(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addApplicants())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Add")," "))}function D(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.generateResults())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Generate Results")," "))}function J(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.revertResults())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Cancel Results")," "))}function N(a,s){if(1&a&&(e.TgZ(0,"span",42),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Oqu(t.selectedFileName)}}function F(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",35)(1,"label",36)(2,"input",37),e.NdJ("change",function(n){e.CHM(t);const l=e.oxw();return e.KtG(l.onFileSelected(n))}),e.qZA(),e._UZ(3,"i",38),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"div"),e.YNc(7,N,2,1,"span",39),e.qZA()(),e.TgZ(8,"button",40),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.importApplicants())}),e._UZ(9,"i",41),e._uU(10),e.ALo(11,"translate"),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,3,"Choose File")," "),e.xp6(3),e.Q6J("ngIf",t.selectedFileName),e.xp6(3),e.hij(" ",e.lcZ(11,5,"Import Data")," ")}}function L(a,s){1&a&&(e.TgZ(0,"a",43),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Search Filter")))}function I(a,s){if(1&a&&(e.TgZ(0,"option",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(e.lcZ(2,2,t.label))}}function R(a,s){if(1&a&&(e.TgZ(0,"select",53)(1,"option",54),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,I,3,4,"option",28),e.qZA()),2&a){const t=e.oxw().$implicit;e.Q6J("id",t.name)("formControlName",t.name),e.xp6(2),e.Oqu(e.lcZ(3,4,"Select "+t.label)),e.xp6(2),e.Q6J("ngForOf",t.options)}}function Q(a,s){if(1&a&&(e.TgZ(0,"div",50)(1,"label",51),e._uU(2),e.ALo(3,"translate"),e.ALo(4,"titlecase"),e.qZA(),e.YNc(5,R,5,6,"select",52),e.qZA()),2&a){const t=s.$implicit,i=e.oxw(2);e.xp6(1),e.s9C("for",t.name),e.xp6(1),e.Oqu(e.lcZ(3,3,e.lcZ(4,5,t.label))),e.xp6(3),e.Q6J("ngIf",i.searchForm.get(t.name))}}function w(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"label",51),e._uU(2),e.ALo(3,"translate"),e.ALo(4,"titlecase"),e.qZA(),e._UZ(5,"input",58),e.ALo(6,"translate"),e.ALo(7,"titlecase"),e.BQk()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.s9C("for",t.name),e.xp6(1),e.Oqu(e.lcZ(3,5,e.lcZ(4,7,t.label))),e.xp6(3),e.s9C("formControlName",t.name),e.Q6J("id",t.name)("placeholder",e.lcZ(6,9,e.lcZ(7,11,t.label)))}}function k(a,s){if(1&a&&(e.TgZ(0,"label",59),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"titlecase"),e.qZA(),e.TgZ(4,"div",60)(5,"div",0)(6,"div",50),e._UZ(7,"input",61),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",50),e._UZ(10,"input",62),e.ALo(11,"translate"),e.qZA()()()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,3,e.lcZ(3,5,t.label))),e.xp6(6),e.s9C("placeholder",e.lcZ(8,7,"General Certificate")),e.xp6(3),e.s9C("placeholder",e.lcZ(11,9,"Precise Certificate"))}}function Y(a,s){if(1&a&&(e.TgZ(0,"div",50),e.YNc(1,w,8,13,"ng-container",56),e.YNc(2,k,12,11,"ng-template",null,57,e.W1O),e.qZA()),2&a){const t=s.$implicit,i=e.MAs(3);e.xp6(1),e.Q6J("ngIf","certificate"!==t.name)("ngIfElse",i)}}function B(a,s){if(1&a&&(e.TgZ(0,"option",55),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(e.lcZ(2,2,t.label))}}function K(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"div",64),e._UZ(2,"input",66),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",64),e._UZ(5,"input",67),e.ALo(6,"translate"),e.qZA(),e.BQk()),2&a){const t=e.oxw(2).$implicit;e.xp6(2),e.s9C("placeholder",e.lcZ(3,4,"From")),e.Q6J("id","from-"+t.name),e.xp6(3),e.s9C("placeholder",e.lcZ(6,6,"To")),e.Q6J("id","to-"+t.name)}}function G(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"div",68),e._UZ(2,"input",69),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&a){const t=e.oxw(2).$implicit;e.xp6(2),e.Q6J("id",t.name)("placeholder",e.lcZ(3,2,t.label))}}function $(a,s){if(1&a&&(e.ynx(0),e.YNc(1,K,7,8,"ng-container",65),e.YNc(2,G,4,4,"ng-container",65),e.BQk()),2&a){const t=e.oxw().$implicit,i=e.oxw(2);let n,l,o,p;e.xp6(1),e.Q6J("ngIf","range"===(null==(n=i.searchForm.get(t.name))||null==(l=n.get("condition"))?null:l.value)),e.xp6(1),e.Q6J("ngIf","range"!==(null==(o=i.searchForm.get(t.name))||null==(p=o.get("condition"))?null:p.value))}}function W(a,s){if(1&a&&(e.TgZ(0,"div",63)(1,"label",51),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",0)(5,"div",64)(6,"select",53),e.YNc(7,B,3,4,"option",28),e.qZA()(),e.YNc(8,$,3,2,"ng-container",65),e.qZA()()),2&a){const t=s.$implicit,i=e.oxw(2);let n;e.Q6J("formGroupName",t.name),e.xp6(1),e.s9C("for",t.name),e.xp6(1),e.Oqu(e.lcZ(3,7,t.label)),e.xp6(4),e.Q6J("id",t.name+"-condition")("formControlName","condition"),e.xp6(1),e.Q6J("ngForOf",t.conditions),e.xp6(1),e.Q6J("ngIf",null==(n=i.searchForm.get(t.name))?null:n.get("condition"))}}function z(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-card",1),e.ALo(1,"translate"),e.TgZ(2,"div",0)(3,"div",44)(4,"form",45),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onSubmit())}),e.TgZ(5,"div",0),e.YNc(6,Q,6,7,"div",46),e.YNc(7,Y,4,2,"div",46),e.YNc(8,W,9,9,"div",47),e.TgZ(9,"div",48)(10,"button",49),e._uU(11),e.ALo(12,"translate"),e.qZA()()()()()()()}if(2&a){const t=e.oxw();e.s9C("cardTitle",e.lcZ(1,7,"Basic Component")),e.Q6J("options",!1),e.xp6(4),e.Q6J("formGroup",t.searchForm),e.xp6(2),e.Q6J("ngForOf",t.searchFields),e.xp6(1),e.Q6J("ngForOf",t.stringFields),e.xp6(1),e.Q6J("ngForOf",t.numericFields),e.xp6(3),e.Oqu(e.lcZ(12,9,"Submit"))}}const m=function(a){return{sorted:a}};function j(a,s){if(1&a&&(e.TgZ(0,"mat-icon",72),e._uU(1,"keyboard_arrow_up"),e.qZA()),2&a){const t=e.oxw(2).$implicit,i=e.oxw();e.Q6J("ngClass",e.VKq(1,m,i.sortedColumn===t.name&&null!==i.sortOrder))}}function H(a,s){if(1&a&&(e.TgZ(0,"mat-icon",72),e._uU(1,"keyboard_arrow_down"),e.qZA()),2&a){const t=e.oxw(2).$implicit,i=e.oxw();e.Q6J("ngClass",e.VKq(1,m,i.sortedColumn===t.name&&null!==i.sortOrder))}}function V(a,s){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"th",70),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,l=e.oxw();return e.KtG(n.sortable?l.sortColumn(n.name):"")}),e._uU(2),e.ALo(3,"translate"),e.YNc(4,j,2,3,"mat-icon",71),e.YNc(5,H,2,3,"mat-icon",71),e.qZA(),e.BQk()}if(2&a){const t=e.oxw().$implicit,i=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,3,t.label)," "),e.xp6(2),e.Q6J("ngIf",t.sortable&&"asc"===i.sortOrder),e.xp6(1),e.Q6J("ngIf",t.sortable&&"desc"===i.sortOrder)}}function X(a,s){if(1&a&&(e.TgZ(0,"mat-icon",72),e._uU(1,"keyboard_arrow_up"),e.qZA()),2&a){const t=e.oxw(3).$implicit,i=e.oxw();e.Q6J("ngClass",e.VKq(1,m,i.sortedColumn===t.name&&null!==i.sortOrder))}}function ee(a,s){if(1&a&&(e.TgZ(0,"mat-icon",72),e._uU(1,"keyboard_arrow_down"),e.qZA()),2&a){const t=e.oxw(3).$implicit,i=e.oxw();e.Q6J("ngClass",e.VKq(1,m,i.sortedColumn===t.name&&null!==i.sortOrder))}}function te(a,s){if(1&a&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.YNc(3,X,2,3,"mat-icon",71),e.YNc(4,ee,2,3,"mat-icon",71),e.qZA()),2&a){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,3,t.label)," "),e.xp6(2),e.Q6J("ngIf",t.sortable&&"asc"===i.sortOrder),e.xp6(1),e.Q6J("ngIf",t.sortable&&"desc"===i.sortOrder)}}function ne(a,s){if(1&a&&(e.ynx(0),e.YNc(1,te,5,5,"th",65),e.BQk()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","Admin"===t.role||"User"===t.role&&1===t.permissions.deleteApplicants)}}function ae(a,s){if(1&a&&(e.ynx(0),e.YNc(1,V,6,5,"ng-container",65),e.YNc(2,ne,2,1,"ng-container",65),e.BQk()),2&a){const t=s.$implicit;e.xp6(1),e.Q6J("ngIf","Delete"!==t.label),e.xp6(1),e.Q6J("ngIf","Delete"===t.label)}}function ie(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"td")(1,"i",77),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,l=e.oxw();return e.KtG(l.deleteRecord(n.id))}),e.qZA()()}}function le(a,s){1&a&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}const oe=function(a,s){return{green:a,red:s}};function se(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"input",73),e.NdJ("change",function(n){const o=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.toggleSelection(n,o.id))}),e.qZA()(),e.TgZ(3,"td")(4,"div",74),e._UZ(5,"div",72),e.qZA()(),e.TgZ(6,"th",75),e._uU(7),e.qZA(),e.TgZ(8,"td")(9,"i",76),e.NdJ("click",function(){const l=e.CHM(t).$implicit,o=e.oxw();return e.KtG(o.showDetails(l.id))}),e.qZA()(),e.YNc(10,ie,2,0,"td",65),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.qZA(),e.TgZ(27,"td"),e._uU(28),e.qZA(),e.TgZ(29,"td"),e._uU(30),e.YNc(31,le,2,0,"span",65),e._uU(32),e.qZA(),e.TgZ(33,"td"),e._uU(34),e.qZA(),e.TgZ(35,"td"),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"td"),e._uU(39),e.qZA(),e.TgZ(40,"td"),e._uU(41),e.qZA(),e.TgZ(42,"td"),e._uU(43),e.qZA(),e.TgZ(44,"td"),e._uU(45),e.qZA()()}if(2&a){const t=s.$implicit,i=e.oxw();e.xp6(2),e.Q6J("checked",i.isSelected(t.id)),e.xp6(3),e.Q6J("ngClass",e.WLB(28,oe,1===(null==t?null:t.accepted),0===t.accepted)),e.xp6(2),e.Oqu(t.id),e.xp6(3),e.Q6J("ngIf","Admin"===i.role||"User"===i.role&&1===i.permissions.deleteApplicants),e.xp6(2),e.Oqu(e.lcZ(13,22,t.status?"Audited":"Not Audited")),e.xp6(3),e.Oqu(t.fullName),e.xp6(2),e.Oqu(e.lcZ(18,24,i.getCategoryString(t.category))),e.xp6(3),e.AsE("",t.certificate.general," - ",t.certificate.precise,""),e.xp6(2),e.Oqu(t.governorate),e.xp6(2),e.Oqu(t.graduationRate),e.xp6(2),e.Oqu(t.specialization_data.length),e.xp6(2),e.Oqu(t.destination),e.xp6(2),e.hij("",t.destination," "),e.xp6(1),e.Q6J("ngIf",t.sub_entity),e.xp6(1),e.hij(" ",t.sub_entity,""),e.xp6(2),e.Oqu(t.cardNumber),e.xp6(2),e.Oqu(e.lcZ(37,26,i.getDesireOrderString(t.desireOrder))),e.xp6(3),e.Oqu(t.recordEntry),e.xp6(2),e.Oqu(t.entryDate),e.xp6(2),e.Oqu(t.lastModifier),e.xp6(2),e.Oqu(t.modificationDate)}}function re(a,s){if(1&a&&(e.TgZ(0,"option",55),e._uU(1),e.qZA()),2&a){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}const ce=(()=>{class a{constructor(t,i,n,l,o,p,h,f,pe,_e,de){this.dialog=t,this.fb=i,this.translate=n,this.applicantsService=l,this.router=o,this.governorateService=p,this.generateResult=h,this.sharedService=f,this.excelService=pe,this.authService=_e,this.rolesService=de,this.applicants=[],this.categoryOptions=[],this.governorateOptions=[],this.selectedIds=[],this.selectedFileName=null,this.numericFields=[{name:"id",label:"ID",conditions:[{value:"equals",label:"Equals"},{value:"greater_than",label:"Greater Than"},{value:"less_than",label:"Less Than"},{value:"greater_than_or_equal",label:"Greater Than or Equal To"},{value:"less_than_or_equal",label:"Less Than or Equal To"},{value:"range",label:"Range"}]},{name:"graduationRate",label:"Graduation Rate",conditions:[{value:"equals",label:"Equals"},{value:"greater_than",label:"Greater Than"},{value:"less_than",label:"Less Than"},{value:"greater_than_or_equal",label:"Greater Than or Equal To"},{value:"less_than_or_equal",label:"Less Than or Equal To"},{value:"range",label:"Range"}]},{name:"cardNumber",label:"Card Number",conditions:[{value:"equals",label:"Equals"},{value:"greater_than",label:"Greater Than"},{value:"less_than",label:"Less Than"},{value:"greater_than_or_equal",label:"Greater Than or Equal To"},{value:"less_than_or_equal",label:"Less Than or Equal To"},{value:"range",label:"Range"}]},{name:"order_of_desire",label:"Desire Order",conditions:[{value:"equals",label:"Equals"},{value:"greater_than",label:"Greater Than"},{value:"less_than",label:"Less Than"},{value:"greater_than_or_equal",label:"Greater Than or Equal To"},{value:"less_than_or_equal",label:"Less Than or Equal To"},{value:"range",label:"Range"}]}],this.stringFields=[{name:"fullName",label:"Full_Name"},{name:"certificate",label:"Certificate"},{name:"destination",label:"The_Ministry"},{name:"destination",label:"Destination"},{name:"recordEntry",label:"Record_Entry"},{name:"lastModifier",label:"Last_Modified"}],this.searchFields=[{name:"category",label:"Category",options:[]},{name:"governorate",label:"Governorate",options:[]}],this.columnData=[{name:"",label:"",sortable:!1},{name:"id",label:"ID",sortable:!0},{name:"",label:"Details",sortable:!1},{name:"",label:"Delete",sortable:!1},{name:"status",label:"Status",sortable:!0},{name:"fullName",label:"Full Name",sortable:!0},{name:"category",label:"Category",sortable:!0},{name:"certificate",label:"Certificate",sortable:!1},{name:"governorate",label:"Governorate",sortable:!0},{name:"graduationRate",label:"Graduation Rate",sortable:!0},{name:"numberOfDesires",label:"Number of Desires",sortable:!1},{name:"ministry",label:"Ministry",sortable:!1},{name:"destination",label:"Destination",sortable:!0},{name:"cardNumber",label:"Card Number",sortable:!0},{name:"desireOrder",label:"Desire Order",sortable:!0},{name:"recordEntry",label:"Record Entry",sortable:!0},{name:"entryDate",label:"Entry Date",sortable:!0},{name:"lastModified",label:"Last Modified",sortable:!1},{name:"modificationDate",label:"Modification Date",sortable:!0}],this.currentPage=1,this.pageSizeSelected=5,this.pageSizes=[5,10,25,50,100],this.sortedColumn="",this.sortOrder="asc",this.file=null,this.applicantTable()}applicantTable(){return this.applicantsService.getApplicants().subscribe(t=>{this.applicants=t,this.applicants.forEach(i=>{i.certificate&&(i.certificate=JSON.parse(i.certificate))})}),this.applicants}ngOnInit(){this.initForm(),this.translate.setLanguage(localStorage.getItem("i18nextLng")),this.categoryOptions=Object.keys(u.WD).map(t=>({value:u.WD[t],label:this.sharedService.getCategoryString(u.WD[t])})),this.searchFields.find(t=>"category"===t.name).options=this.categoryOptions,this.governorateService.getGovernorateData().subscribe(t=>{this.governorateOptions=t.data.map(n=>({value:n.name,label:n.name})),this.searchFields.find(n=>"governorate"===n.name).options=this.governorateOptions,this.calculateTotalPages()}),this.role=localStorage.getItem("role"),this.permissions=this.authService.permissionsService()}getCategoryString(t){return this.sharedService.getCategoryString(t)}getDesireOrderString(t){return this.sharedService.getDesireOrderString(t)}toggleSelection(t,i){if(t.target.checked)this.selectedIds.push(i);else{const n=this.selectedIds.indexOf(i);-1!==n&&this.selectedIds.splice(n,1)}}isSelected(t){return this.selectedIds.includes(t)}selectAll(t){this.selectedIds=t.target.checked?this.applicants.map(i=>i.id):[]}deleteSelected(){0!==this.selectedIds.length&&this.dialog.open(d.z,{position:{top:"10px",left:"10px"},data:{message:"Are you sure you want to delete selected applicants"}}).afterClosed().subscribe(i=>{i&&this.applicantsService.deleteApplicantsByIDs(this.selectedIds).subscribe(n=>{n&&(this.selectedIds=[],this.applicantTable(),this.sharedService.openSnackBar("Selected Applicants has been deleted successfully","close"))})})}initForm(){const t={};this.numericFields.forEach(o=>{t[o.name]=this.fb.group({condition:[o.conditions[0].value],min:[null],max:[null],value:[null]})});const i={};this.stringFields.forEach(o=>{i[o.name]="certificate"===o.name?this.fb.group({general:[null],precise:[null]}):[null]});const n={};this.searchFields.forEach(o=>{n[o.name]=[null]});const l={...t,...i,...n};this.searchForm=this.fb.group(l),this.searchForm.patchValue({category:"",governorate:""})}paginateData(){const t=(this.currentPage-1)*this.pageSizeSelected,i=Math.min(t+this.pageSizeSelected,this.applicants.length);return this.applicants.slice(t,i)}previousPage(){this.currentPage>1&&this.currentPage--}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}firstPage(){this.currentPage=1}lastPage(){this.currentPage=this.totalPages}getRange(){const t=(this.currentPage-1)*this.pageSizeSelected+1;return`${t} - ${Math.min(t+this.pageSizeSelected-1,this.applicants.length)}`}changePageSize(t){this.pageSizeSelected=t,this.currentPage=1,this.calculateTotalPages()}calculateTotalPages(){this.totalPages=Math.ceil(this.applicants.length/this.pageSizeSelected)}addApplicants(){this.router.navigate(["/basic/applicants-data"])}showDetails(t){this.router.navigate(["/basic/applicants-data",t])}generateResults(){this.dialog.open(d.z,{position:{top:"10px",left:"10px"},data:{message:"Are you sure you want to generate results ?",flag:!0}}).afterClosed().subscribe(i=>{i&&this.generateResult.generateResults().subscribe(n=>{n&&(this.applicantTable(),this.sharedService.openSnackBar("Results Generated Successfully","close"))})})}revertResults(){this.dialog.open(d.z,{position:{top:"10px",left:"10px"},data:{message:"Are you sure you want to revert results ?",flag:!0}}).afterClosed().subscribe(i=>{i&&this.generateResult.cancelResults().subscribe(n=>{n&&(this.applicantTable(),this.sharedService.openSnackBar("Results Reverted Successfully","close"))})})}sortColumn(t){this.sortedColumn===t?this.sortOrder="asc"===this.sortOrder?"desc":"asc":(this.sortOrder="asc",this.sortedColumn=t),this.applicants.sort((i,n)=>"number"==typeof i[t]&&"number"==typeof n[t]?"asc"===this.sortOrder?i[t]-n[t]:n[t]-i[t]:"asc"===this.sortOrder?i[t].localeCompare(n[t]):n[t].localeCompare(i[t]))}deleteRecord(t){this.dialog.open(d.z,{position:{top:"10px",left:"10px"},data:{message:"Are you sure you want to delete this record ?"}}).afterClosed().subscribe(n=>{n&&this.applicantsService.deleteApplicantsByID(t).subscribe(l=>{l&&this.applicantTable()})})}onSubmit(){const t=this.searchForm.getRawValue(),n={};this.numericFields.forEach(l=>{const o=t[l.name]?.condition,p=t[l.name]?.min,h=t[l.name]?.max,f=t[l.name]?.value;o&&("range"!==o||null===p&&null===h?"range"!==o&&null!==f&&(n[l.name]={condition:o,value:f}):n[l.name]={condition:o,value:{min:p,max:h}})}),this.stringFields.forEach(l=>{const o=t[l.name];"certificate"===l.name?o.general&&o.precise&&(n[l.name]=JSON.stringify({general:o.general,precise:o.precise})):o&&(n[l.name]=o)}),this.searchFields.forEach(l=>{const o=t[l.name];o&&(n[l.name]=o)}),this.applicantsService.getApplicants({...n}).subscribe(l=>{this.applicants=l,this.applicants.forEach(o=>{o.certificate&&(o.certificate=JSON.parse(o.certificate))})})}exportApplicantsData(){const t=this.searchForm.getRawValue(),i={};this.searchFields.forEach(n=>{const l=t[n.name];l&&(i[n.name]=l)}),this.excelService.exportApplicants(i).subscribe(n=>{this.downloadFile(n)})}exportApplicantsHeaders(){this.excelService.exportApplicantsHeader().subscribe(t=>{this.downloadFile(t)})}onFileSelected(t){this.file=t.target.files[0],this.selectedFileName=this.file?this.file.name:null}importApplicants(){this.file?this.excelService.importApplicantsHeader(this.file).subscribe(()=>{this.applicantTable(),this.file=null,this.selectedFileName=null,this.sharedService.openSnackBar("Applicants data has been added successfully","close"),this.getRange()},t=>{console.error("Error importing job descriptions:",t),t&&this.sharedService.openSnackBar("Applicants data has not been added","close")}):console.error("No file selected")}downloadFile(t){const i=document.createElement("a");i.href=window.URL.createObjectURL(t),i.download="applicants_data.xlsx",i.click()}static#e=this.\u0275fac=function(i){return new(i||a)(e.Y36(x.uw),e.Y36(c.qu),e.Y36(Z.D),e.Y36(v.D),e.Y36(T.F0),e.Y36(C.y),e.Y36(O.v),e.Y36(u.F1),e.Y36(q.x),e.Y36(E.e),e.Y36(P.f))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-applicants"]],standalone:!0,features:[e.jDz],decls:65,vars:34,consts:[[1,"row"],[3,"cardTitle","options"],[1,"header"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],["class","d-flex align-items-center",4,"ngIf"],[1,"circles"],[1,"d-flex"],[1,"red"],[1,"d-flex",2,"margin-left","20px"],[1,"green"],[1,"card"],["activeIds","static-2",3,"closeOthers"],["id","static-1"],["ngbPanelTitle",""],["ngbPanelContent",""],[1,"table-responsive"],[1,"table"],[2,"text-align","center"],["type","checkbox",3,"change"],[1,"fas","fa-trash-alt","icon-position",3,"click"],[4,"ngFor","ngForOf"],[1,"pagination-controls","d-flex","justify-content-between"],[1,"d-flex","row"],[1,"col-md-auto","mt-auto","mb-auto"],[1,"",2,"width","100%"],[1,"col-md-auto"],[1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-auto","mb-auto"],[1,"border-0","fs-4","bg-transparent",3,"disabled","click"],[1,"fa","fa-angle-double-left"],[1,"fa","fa-angle-left","bg-transparent"],[1,"fa","fa-angle-right"],[1,"fa","fa-angle-double-right"],[1,"d-flex","align-items-center"],[1,"btn","btn-primary","btn-file"],["type","file","accept",".xlsx,.xls",2,"display","none",3,"change"],[1,"feather","icon-upload"],["class","ml-2",4,"ngIf"],["type","button",1,"btn","btn-success","ml-2",3,"click"],[1,"feather","icon-download"],[1,"ml-2"],["href","javascript:"],[1,"col-md-12"],[3,"formGroup","ngSubmit"],["class","col-md-6 form-group",4,"ngFor","ngForOf"],["class","col-md-6 form-group",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-md-12","button-style"],["type","submit",1,"btn","btn-primary"],[1,"col-md-6","form-group"],[3,"for"],["class","form-control",3,"id","formControlName",4,"ngIf"],[1,"form-control",3,"id","formControlName"],["value","","selected",""],[3,"value"],[4,"ngIf","ngIfElse"],["certificateFields",""],["type","text",1,"form-control",3,"id","placeholder","formControlName"],["for","certificate"],["formGroupName","certificate"],["type","text","id","certificateGeneral","formControlName","general",1,"form-control",3,"placeholder"],["type","text","id","certificatePrecise","formControlName","precise",1,"form-control",3,"placeholder"],[1,"col-md-6","form-group",3,"formGroupName"],[1,"col-md-4"],[4,"ngIf"],["type","number","formControlName","min",1,"form-control",3,"id","placeholder"],["type","number","formControlName","max",1,"form-control",3,"id","placeholder"],[1,"col-md-8"],["type","number","formControlName","value",1,"form-control",3,"id","placeholder"],[2,"cursor","pointer","position","relative",3,"click"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["type","checkbox",3,"checked","change"],[1,"circles","padding-top"],["scope","row"],[1,"fas","fa-info-circle","hover",3,"click"],[1,"fas","fa-trash-alt","hover",3,"click"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"app-card",1),e.ALo(2,"translate"),e.TgZ(3,"div",2),e.YNc(4,M,3,3,"button",3),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.exportApplicantsData()}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",4),e.NdJ("click",function(){return n.exportApplicantsHeaders()}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.YNc(11,D,3,3,"button",3),e.YNc(12,J,3,3,"button",3),e.YNc(13,F,12,7,"div",5),e.TgZ(14,"div",6)(15,"div",7),e._UZ(16,"div",8),e.TgZ(17,"span"),e._uU(18),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"div",9),e._UZ(21,"div",10),e.TgZ(22,"span"),e._uU(23),e.ALo(24,"translate"),e.qZA()()()(),e._UZ(25,"br")(26,"hr"),e.TgZ(27,"div",11)(28,"ngb-accordion",12)(29,"ngb-panel",13),e.YNc(30,L,3,3,"ng-template",14),e.YNc(31,z,13,11,"ng-template",15),e.qZA()()(),e._UZ(32,"br"),e.TgZ(33,"div",16)(34,"table",17)(35,"thead",18)(36,"tr")(37,"th")(38,"input",19),e.NdJ("change",function(o){return n.selectAll(o)}),e.qZA(),e.TgZ(39,"i",20),e.NdJ("click",function(){return n.deleteSelected()}),e.qZA()(),e.YNc(40,ae,3,2,"ng-container",21),e.qZA()(),e.TgZ(41,"tbody"),e.YNc(42,se,46,31,"tr",21),e.qZA()()(),e.TgZ(43,"div",22)(44,"div",23)(45,"div",24)(46,"span",25),e._uU(47),e.ALo(48,"translate"),e.qZA()(),e.TgZ(49,"div",26)(50,"select",27),e.NdJ("ngModelChange",function(o){return n.pageSizeSelected=o})("change",function(){return n.changePageSize(n.pageSizeSelected)}),e.YNc(51,re,2,2,"option",28),e.qZA()()(),e.TgZ(52,"div",0)(53,"div",24)(54,"span",29),e._uU(55),e.qZA()(),e.TgZ(56,"div",24)(57,"button",30),e.NdJ("click",function(){return n.firstPage()}),e._UZ(58,"i",31),e.qZA(),e.TgZ(59,"button",30),e.NdJ("click",function(){return n.previousPage()}),e._UZ(60,"i",32),e.qZA(),e.TgZ(61,"button",30),e.NdJ("click",function(){return n.nextPage()}),e._UZ(62,"i",33),e.qZA(),e.TgZ(63,"button",30),e.NdJ("click",function(){return n.lastPage()}),e._UZ(64,"i",34),e.qZA()()()()()()),2&i&&(e.xp6(1),e.s9C("cardTitle",e.lcZ(2,22,"Basic Table")),e.Q6J("options",!1),e.xp6(3),e.Q6J("ngIf","Admin"===n.role||"User"===n.role&&1===n.permissions.addApplicants),e.xp6(2),e.hij(" ",e.lcZ(7,24,"Print")," "),e.xp6(3),e.hij(" ",e.lcZ(10,26,"Export Template")," "),e.xp6(2),e.Q6J("ngIf","Admin"===n.role||"User"===n.role&&1===n.permissions.sortable),e.xp6(1),e.Q6J("ngIf","Admin"===n.role||"User"===n.role&&1===n.permissions.sortable),e.xp6(1),e.Q6J("ngIf","Admin"===n.role||"User"===n.role&&1===n.permissions.addApplicants),e.xp6(5),e.Oqu(e.lcZ(19,28,"Not Sorted")),e.xp6(5),e.Oqu(e.lcZ(24,30,"Sorted")),e.xp6(5),e.Q6J("closeOthers",!0),e.xp6(12),e.Q6J("ngForOf",n.columnData),e.xp6(2),e.Q6J("ngForOf",n.paginateData()),e.xp6(5),e.hij("",e.lcZ(48,32,"Items Per Page"),":"),e.xp6(3),e.Q6J("ngModel",n.pageSizeSelected),e.xp6(1),e.Q6J("ngForOf",n.pageSizes),e.xp6(4),e.AsE("",n.getRange()," of ",n.applicants.length,""),e.xp6(2),e.Q6J("disabled",1===n.currentPage),e.xp6(2),e.Q6J("disabled",1===n.currentPage),e.xp6(2),e.Q6J("disabled",n.currentPage===n.totalPages),e.xp6(2),e.Q6J("disabled",n.currentPage===n.totalPages))},dependencies:[_.ez,_.mk,_.sg,_.O5,_.rS,A.m,c._Y,c.YN,c.Kr,c.Fj,c.wV,c.EJ,c.JJ,c.JL,c.On,c.sg,c.u,c.x0,U.A,g.gY,g.Gk,g.Cu,g.gW,S.Hw,y.X$,c.u5,c.UX],styles:[".error-label[_ngcontent-%COMP%]{color:red}.circles[_ngcontent-%COMP%]   .red[_ngcontent-%COMP%]{background-color:red;width:15px;height:15px;border-radius:14px}.circles[_ngcontent-%COMP%]{display:flex}.circles[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{background-color:green;width:15px;height:15px;border-radius:14px}.circles[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:1rem;color:#000}.header[_ngcontent-%COMP%]{display:flex}.header[_ngcontent-%COMP%]   .circles[_ngcontent-%COMP%]{margin-left:5rem;margin:auto}.hover[_ngcontent-%COMP%]{cursor:pointer}th[_ngcontent-%COMP%]{position:relative;cursor:pointer}th[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{opacity:1}mat-icon[_ngcontent-%COMP%]{font-size:16px;vertical-align:middle;position:absolute;opacity:0;transition:opacity .3s ease}mat-icon.sorted[_ngcontent-%COMP%]{opacity:1}.padding-top[_ngcontent-%COMP%]{padding-top:.1rem}.icon-position[_ngcontent-%COMP%]{position:relative;left:15px;bottom:2px}"]})}return a})()}}]);