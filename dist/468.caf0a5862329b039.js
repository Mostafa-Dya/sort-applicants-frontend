"use strict";(self.webpackChunksort_applicants=self.webpackChunksort_applicants||[]).push([[468],{7468:(de,b,s)=>{s.r(b),s.d(b,{default:()=>ce});var _=s(6814),A=s(5637),u=s(1326),c=s(6223),d=s(7847),e=s(5879),x=s(7700),Z=s(5457),v=s(9006),T=s(1896),C=s(4190),O=s(7704),q=s(247),E=s(21),P=s(3831),U=s(220),g=s(5399),M=s(617),y=s(3999);function D(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.addApplicants())}),e._UZ(1,"i",5),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Add")," "))}function J(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.generateResults())}),e._UZ(1,"i",5),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Generate Results")," "))}function N(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.revertResults())}),e._UZ(1,"i",5),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Cancel Results")," "))}function F(a,r){if(1&a&&(e.TgZ(0,"span",43),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Oqu(t.selectedFileName)}}function S(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",36)(1,"label",37)(2,"input",38),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.onFileSelected(n))}),e.qZA(),e._UZ(3,"i",39),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"div"),e.YNc(7,F,2,1,"span",40),e.qZA()(),e.TgZ(8,"button",41),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.importApplicants())}),e._UZ(9,"i",42),e._uU(10),e.ALo(11,"translate"),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,3,"Choose File")," "),e.xp6(3),e.Q6J("ngIf",t.selectedFileName),e.xp6(3),e.hij(" ",e.lcZ(11,5,"Import Data")," ")}}function I(a,r){1&a&&(e.TgZ(0,"a",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Search Filter")))}function L(a,r){if(1&a&&(e.TgZ(0,"option",56),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(e.lcZ(2,2,t.label))}}function Q(a,r){if(1&a&&(e.TgZ(0,"select",54)(1,"option",55),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,L,3,4,"option",29),e.qZA()),2&a){const t=e.oxw().$implicit;e.Q6J("id",t.name)("formControlName",t.name),e.xp6(2),e.AsE("",e.lcZ(3,5,"Select")," ",t.label,""),e.xp6(2),e.Q6J("ngForOf",t.options)}}function R(a,r){if(1&a&&(e.TgZ(0,"div",51)(1,"label",52),e._uU(2),e.ALo(3,"translate"),e.ALo(4,"titlecase"),e.qZA(),e.YNc(5,Q,5,7,"select",53),e.qZA()),2&a){const t=r.$implicit,i=e.oxw(2);e.xp6(1),e.s9C("for",t.name),e.xp6(1),e.Oqu(e.lcZ(3,3,e.lcZ(4,5,t.label))),e.xp6(3),e.Q6J("ngIf",i.searchForm.get(t.name))}}function w(a,r){if(1&a&&(e.ynx(0),e.TgZ(1,"label",52),e._uU(2),e.ALo(3,"translate"),e.ALo(4,"titlecase"),e.qZA(),e._UZ(5,"input",59),e.ALo(6,"translate"),e.ALo(7,"titlecase"),e.BQk()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.s9C("for",t.name),e.xp6(1),e.Oqu(e.lcZ(3,5,e.lcZ(4,7,t.label))),e.xp6(3),e.s9C("formControlName",t.name),e.Q6J("id",t.name)("placeholder",e.lcZ(6,9,e.lcZ(7,11,t.label)))}}function Y(a,r){if(1&a&&(e.TgZ(0,"label",60),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"titlecase"),e.qZA(),e.TgZ(4,"div",61)(5,"div",0)(6,"div",51),e._UZ(7,"input",62),e.qZA(),e.TgZ(8,"div",51),e._UZ(9,"input",63),e.qZA()()()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,e.lcZ(3,3,t.label)))}}function k(a,r){if(1&a&&(e.TgZ(0,"div",51),e.YNc(1,w,8,13,"ng-container",57),e.YNc(2,Y,10,5,"ng-template",null,58,e.W1O),e.qZA()),2&a){const t=r.$implicit,i=e.MAs(3);e.xp6(1),e.Q6J("ngIf","certificate"!==t.name)("ngIfElse",i)}}function K(a,r){if(1&a&&(e.TgZ(0,"option",56),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(e.lcZ(2,2,t.label))}}function G(a,r){if(1&a&&(e.ynx(0),e.TgZ(1,"div",65),e._UZ(2,"input",67),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",65),e._UZ(5,"input",68),e.ALo(6,"translate"),e.qZA(),e.BQk()),2&a){const t=e.oxw(2).$implicit;e.xp6(2),e.s9C("placeholder",e.lcZ(3,4,"From")),e.Q6J("id","from-"+t.name),e.xp6(3),e.s9C("placeholder",e.lcZ(6,6,"To")),e.Q6J("id","to-"+t.name)}}function B(a,r){if(1&a&&(e.ynx(0),e.TgZ(1,"div",69),e._UZ(2,"input",70),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&a){const t=e.oxw(2).$implicit;e.xp6(2),e.Q6J("id",t.name)("placeholder",e.lcZ(3,2,t.label))}}function $(a,r){if(1&a&&(e.ynx(0),e.YNc(1,G,7,8,"ng-container",66),e.YNc(2,B,4,4,"ng-container",66),e.BQk()),2&a){const t=e.oxw().$implicit,i=e.oxw(2);let n,o,l,p;e.xp6(1),e.Q6J("ngIf","range"===(null==(n=i.searchForm.get(t.name))||null==(o=n.get("condition"))?null:o.value)),e.xp6(1),e.Q6J("ngIf","range"!==(null==(l=i.searchForm.get(t.name))||null==(p=l.get("condition"))?null:p.value))}}function W(a,r){if(1&a&&(e.TgZ(0,"div",64)(1,"label",52),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",0)(5,"div",65)(6,"select",54),e.YNc(7,K,3,4,"option",29),e.qZA()(),e.YNc(8,$,3,2,"ng-container",66),e.qZA()()),2&a){const t=r.$implicit,i=e.oxw(2);let n;e.Q6J("formGroupName",t.name),e.xp6(1),e.s9C("for",t.name),e.xp6(1),e.Oqu(e.lcZ(3,7,t.label)),e.xp6(4),e.Q6J("id",t.name+"-condition")("formControlName","condition"),e.xp6(1),e.Q6J("ngForOf",t.conditions),e.xp6(1),e.Q6J("ngIf",null==(n=i.searchForm.get(t.name))?null:n.get("condition"))}}function z(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"app-card",1),e.ALo(1,"translate"),e.TgZ(2,"div",0)(3,"div",45)(4,"form",46),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onSubmit())}),e.TgZ(5,"div",0),e.YNc(6,R,6,7,"div",47),e.YNc(7,k,4,2,"div",47),e.YNc(8,W,9,9,"div",48),e.TgZ(9,"div",49)(10,"button",50),e._uU(11),e.ALo(12,"translate"),e.qZA()()()()()()()}if(2&a){const t=e.oxw();e.s9C("cardTitle",e.lcZ(1,7,"Basic Component")),e.Q6J("options",!1),e.xp6(4),e.Q6J("formGroup",t.searchForm),e.xp6(2),e.Q6J("ngForOf",t.searchFields),e.xp6(1),e.Q6J("ngForOf",t.stringFields),e.xp6(1),e.Q6J("ngForOf",t.numericFields),e.xp6(3),e.Oqu(e.lcZ(12,9,"Submit"))}}const m=function(a){return{sorted:a}};function j(a,r){if(1&a&&(e.TgZ(0,"mat-icon",73),e._uU(1,"keyboard_arrow_up"),e.qZA()),2&a){const t=e.oxw(2).$implicit,i=e.oxw();e.Q6J("ngClass",e.VKq(1,m,i.sortedColumn===t.name&&null!==i.sortOrder))}}function H(a,r){if(1&a&&(e.TgZ(0,"mat-icon",73),e._uU(1,"keyboard_arrow_down"),e.qZA()),2&a){const t=e.oxw(2).$implicit,i=e.oxw();e.Q6J("ngClass",e.VKq(1,m,i.sortedColumn===t.name&&null!==i.sortOrder))}}function V(a,r){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"th",71),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(n.sortable?o.sortColumn(n.name):"")}),e._uU(2),e.ALo(3,"translate"),e.YNc(4,j,2,3,"mat-icon",72),e.YNc(5,H,2,3,"mat-icon",72),e.qZA(),e.BQk()}if(2&a){const t=e.oxw().$implicit,i=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,3,t.label)," "),e.xp6(2),e.Q6J("ngIf",t.sortable&&"asc"===i.sortOrder),e.xp6(1),e.Q6J("ngIf",t.sortable&&"desc"===i.sortOrder)}}function X(a,r){if(1&a&&(e.TgZ(0,"mat-icon",73),e._uU(1,"keyboard_arrow_up"),e.qZA()),2&a){const t=e.oxw(3).$implicit,i=e.oxw();e.Q6J("ngClass",e.VKq(1,m,i.sortedColumn===t.name&&null!==i.sortOrder))}}function ee(a,r){if(1&a&&(e.TgZ(0,"mat-icon",73),e._uU(1,"keyboard_arrow_down"),e.qZA()),2&a){const t=e.oxw(3).$implicit,i=e.oxw();e.Q6J("ngClass",e.VKq(1,m,i.sortedColumn===t.name&&null!==i.sortOrder))}}function te(a,r){if(1&a&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.YNc(3,X,2,3,"mat-icon",72),e.YNc(4,ee,2,3,"mat-icon",72),e.qZA()),2&a){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,3,t.label)," "),e.xp6(2),e.Q6J("ngIf",t.sortable&&"asc"===i.sortOrder),e.xp6(1),e.Q6J("ngIf",t.sortable&&"desc"===i.sortOrder)}}function ne(a,r){if(1&a&&(e.ynx(0),e.YNc(1,te,5,5,"th",66),e.BQk()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","Admin"===t.role||"User"===t.role&&1===t.permissions.deleteApplicants)}}function ae(a,r){if(1&a&&(e.ynx(0),e.YNc(1,V,6,5,"ng-container",66),e.YNc(2,ne,2,1,"ng-container",66),e.BQk()),2&a){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf","Delete"!==t.label),e.xp6(1),e.Q6J("ngIf","Delete"===t.label)}}function ie(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"td")(1,"i",78),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.deleteRecord(n.id))}),e.qZA()()}}function oe(a,r){1&a&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}const le=function(a,r){return{green:a,red:r}};function re(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"input",74),e.NdJ("change",function(n){const l=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.toggleSelection(n,l.id))}),e.qZA()(),e.TgZ(3,"td")(4,"div",75),e._UZ(5,"div",73),e.qZA()(),e.TgZ(6,"th",76),e._uU(7),e.qZA(),e.TgZ(8,"td")(9,"i",77),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.showDetails(o.id))}),e.qZA()(),e.YNc(10,ie,2,0,"td",66),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.qZA(),e.TgZ(27,"td"),e._uU(28),e.qZA(),e.TgZ(29,"td"),e._uU(30),e.YNc(31,oe,2,0,"span",66),e._uU(32),e.qZA(),e.TgZ(33,"td"),e._uU(34),e.qZA(),e.TgZ(35,"td"),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"td"),e._uU(39),e.qZA(),e.TgZ(40,"td"),e._uU(41),e.qZA(),e.TgZ(42,"td"),e._uU(43),e.qZA(),e.TgZ(44,"td"),e._uU(45),e.qZA()()}if(2&a){const t=r.$implicit,i=e.oxw();e.xp6(2),e.Q6J("checked",i.isSelected(t.id)),e.xp6(3),e.Q6J("ngClass",e.WLB(28,le,1===(null==t?null:t.accepted),0===t.accepted)),e.xp6(2),e.Oqu(t.id),e.xp6(3),e.Q6J("ngIf","Admin"===i.role||"User"===i.role&&1===i.permissions.deleteApplicants),e.xp6(2),e.Oqu(e.lcZ(13,22,t.status?"Audited":"Not Audited")),e.xp6(3),e.Oqu(t.fullName),e.xp6(2),e.Oqu(e.lcZ(18,24,i.getCategoryString(t.category))),e.xp6(3),e.AsE("",t.certificate.general," - ",t.certificate.precise,""),e.xp6(2),e.Oqu(t.governorate),e.xp6(2),e.Oqu(t.graduationRate),e.xp6(2),e.Oqu(t.specialization_data.length),e.xp6(2),e.Oqu(t.destination),e.xp6(2),e.hij("",t.destination," "),e.xp6(1),e.Q6J("ngIf",t.sub_entity),e.xp6(1),e.hij(" ",t.sub_entity,""),e.xp6(2),e.Oqu(t.cardNumber),e.xp6(2),e.Oqu(e.lcZ(37,26,i.getDesireOrderString(t.desireOrder))),e.xp6(3),e.Oqu(t.recordEntry),e.xp6(2),e.Oqu(t.entryDate),e.xp6(2),e.Oqu(t.lastModifier),e.xp6(2),e.Oqu(t.modificationDate)}}function se(a,r){if(1&a&&(e.TgZ(0,"option",56),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}const ce=(()=>{class a{constructor(t,i,n,o,l,p,f,h,pe,_e,ue){this.dialog=t,this.fb=i,this.translate=n,this.applicantsService=o,this.router=l,this.governorateService=p,this.generateResult=f,this.sharedService=h,this.excelService=pe,this.authService=_e,this.rolesService=ue,this.applicants=[],this.categoryOptions=[],this.governorateOptions=[],this.selectedIds=[],this.selectedFileName=null,this.numericFields=[{name:"id",label:"ID",conditions:[{value:"equals",label:"Equals"},{value:"greater_than",label:"Greater Than"},{value:"less_than",label:"Less Than"},{value:"greater_than_or_equal",label:"Greater Than or Equal To"},{value:"less_than_or_equal",label:"Less Than or Equal To"},{value:"range",label:"Range"}]},{name:"graduationRate",label:"Graduation Rate",conditions:[{value:"equals",label:"Equals"},{value:"greater_than",label:"Greater Than"},{value:"less_than",label:"Less Than"},{value:"greater_than_or_equal",label:"Greater Than or Equal To"},{value:"less_than_or_equal",label:"Less Than or Equal To"},{value:"range",label:"Range"}]},{name:"cardNumber",label:"Card Number",conditions:[{value:"equals",label:"Equals"},{value:"greater_than",label:"Greater Than"},{value:"less_than",label:"Less Than"},{value:"greater_than_or_equal",label:"Greater Than or Equal To"},{value:"less_than_or_equal",label:"Less Than or Equal To"},{value:"range",label:"Range"}]},{name:"order_of_desire",label:"Desire Order",conditions:[{value:"equals",label:"Equals"},{value:"greater_than",label:"Greater Than"},{value:"less_than",label:"Less Than"},{value:"greater_than_or_equal",label:"Greater Than or Equal To"},{value:"less_than_or_equal",label:"Less Than or Equal To"},{value:"range",label:"Range"}]}],this.stringFields=[{name:"fullName",label:"Full_Name"},{name:"certificate",label:"Certificate"},{name:"destination",label:"The_Ministry"},{name:"destination",label:"Destination"},{name:"recordEntry",label:"Record_Entry"},{name:"lastModifier",label:"Last_Modified"}],this.searchFields=[{name:"category",label:"Category",options:[]},{name:"governorate",label:"Governorate",options:[]}],this.columnData=[{name:"",label:"",sortable:!1},{name:"id",label:"ID",sortable:!0},{name:"",label:"Details",sortable:!1},{name:"",label:"Delete",sortable:!1},{name:"status",label:"Status",sortable:!0},{name:"fullName",label:"Full Name",sortable:!0},{name:"category",label:"Category",sortable:!0},{name:"certificate",label:"Certificate",sortable:!1},{name:"governorate",label:"Governorate",sortable:!0},{name:"graduationRate",label:"Graduation Rate",sortable:!0},{name:"numberOfDesires",label:"Number of Desires",sortable:!1},{name:"ministry",label:"Ministry",sortable:!1},{name:"destination",label:"Destination",sortable:!0},{name:"cardNumber",label:"Card Number",sortable:!0},{name:"desireOrder",label:"Desire Order",sortable:!0},{name:"recordEntry",label:"Record Entry",sortable:!0},{name:"entryDate",label:"Entry Date",sortable:!0},{name:"lastModified",label:"Last Modified",sortable:!1},{name:"modificationDate",label:"Modification Date",sortable:!0}],this.currentPage=1,this.pageSizeSelected=5,this.pageSizes=[5,10,25,50,100],this.sortedColumn="",this.sortOrder="asc",this.file=null,this.applicantTable()}applicantTable(){return this.applicantsService.getApplicants().subscribe(t=>{this.applicants=t,this.applicants.forEach(i=>{i.certificate&&(i.certificate=JSON.parse(i.certificate))})}),this.applicants}ngOnInit(){this.initForm(),this.translate.setLanguage(localStorage.getItem("i18nextLng")),this.categoryOptions=Object.keys(d.WD).map(t=>({value:d.WD[t],label:this.sharedService.getCategoryString(d.WD[t])})),this.searchFields.find(t=>"category"===t.name).options=this.categoryOptions,this.governorateService.getGovernorateData().subscribe(t=>{this.governorateOptions=t.data.map(n=>({value:n.name,label:n.name})),this.searchFields.find(n=>"governorate"===n.name).options=this.governorateOptions,this.calculateTotalPages()}),this.role=localStorage.getItem("role"),this.permissions=this.authService.permissionsService()}getCategoryString(t){return this.sharedService.getCategoryString(t)}getDesireOrderString(t){return this.sharedService.getDesireOrderString(t)}toggleSelection(t,i){if(t.target.checked)this.selectedIds.push(i);else{const n=this.selectedIds.indexOf(i);-1!==n&&this.selectedIds.splice(n,1)}}isSelected(t){return this.selectedIds.includes(t)}selectAll(t){this.selectedIds=t.target.checked?this.applicants.map(i=>i.id):[]}deleteSelected(){0!==this.selectedIds.length&&this.dialog.open(u.z,{position:{top:"10px",left:"10px"},data:{message:"Are you sure you want to delete selected applicants?"}}).afterClosed().subscribe(i=>{i&&this.applicantsService.deleteApplicantsByIDs(this.selectedIds).subscribe(n=>{n&&(this.selectedIds=[],this.applicantTable())})})}initForm(){const t={};this.numericFields.forEach(l=>{t[l.name]=this.fb.group({condition:[l.conditions[0].value],min:[null],max:[null],value:[null]})});const i={};this.stringFields.forEach(l=>{i[l.name]="certificate"===l.name?this.fb.group({general:[null],precise:[null]}):[null]});const n={};this.searchFields.forEach(l=>{n[l.name]=[null]});const o={...t,...i,...n};this.searchForm=this.fb.group(o),this.searchForm.patchValue({category:"",governorate:""})}paginateData(){const t=(this.currentPage-1)*this.pageSizeSelected,i=Math.min(t+this.pageSizeSelected,this.applicants.length);return this.applicants.slice(t,i)}previousPage(){this.currentPage>1&&this.currentPage--}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}firstPage(){this.currentPage=1}lastPage(){this.currentPage=this.totalPages}getRange(){const t=(this.currentPage-1)*this.pageSizeSelected+1;return`${t} - ${Math.min(t+this.pageSizeSelected-1,this.applicants.length)}`}changePageSize(t){this.pageSizeSelected=t,this.currentPage=1,this.calculateTotalPages()}calculateTotalPages(){this.totalPages=Math.ceil(this.applicants.length/this.pageSizeSelected)}addApplicants(){this.router.navigate(["/basic/applicants-data"])}showDetails(t){this.router.navigate(["/basic/applicants-data",t])}generateResults(){this.dialog.open(u.z,{position:{top:"10px",left:"10px"},data:{message:"Are you sure you want to generate results ?",flag:!0}}).afterClosed().subscribe(i=>{i&&this.generateResult.generateResults().subscribe(n=>{n&&this.applicantTable()})})}revertResults(){this.dialog.open(u.z,{position:{top:"10px",left:"10px"},data:{message:"Are you sure you want to revert results ?",flag:!0}}).afterClosed().subscribe(i=>{i&&this.generateResult.cancelResults().subscribe(n=>{n&&this.applicantTable()})})}sortColumn(t){this.sortedColumn===t?this.sortOrder="asc"===this.sortOrder?"desc":"asc":(this.sortOrder="asc",this.sortedColumn=t),this.applicants.sort((i,n)=>"number"==typeof i[t]&&"number"==typeof n[t]?"asc"===this.sortOrder?i[t]-n[t]:n[t]-i[t]:"asc"===this.sortOrder?i[t].localeCompare(n[t]):n[t].localeCompare(i[t]))}deleteRecord(t){this.dialog.open(u.z,{position:{top:"10px",left:"10px"},data:{message:"Are you sure you want to delete this record ?"}}).afterClosed().subscribe(n=>{n&&this.applicantsService.deleteApplicantsByID(t).subscribe(o=>{o&&this.applicantTable()})})}onSubmit(){const t=this.searchForm.getRawValue(),n={};this.numericFields.forEach(o=>{const l=t[o.name]?.condition,p=t[o.name]?.min,f=t[o.name]?.max,h=t[o.name]?.value;l&&("range"!==l||null===p&&null===f?"range"!==l&&null!==h&&(n[o.name]={condition:l,value:h}):n[o.name]={condition:l,value:{min:p,max:f}})}),this.stringFields.forEach(o=>{const l=t[o.name];"certificate"===o.name?l.general&&l.precise&&(n[o.name]=JSON.stringify({general:l.general,precise:l.precise})):l&&(n[o.name]=l)}),this.searchFields.forEach(o=>{const l=t[o.name];l&&(n[o.name]=l)}),this.applicantsService.getApplicants({...n}).subscribe(o=>{this.applicants=o,this.applicants.forEach(l=>{l.certificate&&(l.certificate=JSON.parse(l.certificate))})})}exportApplicantsData(){const t=this.searchForm.getRawValue(),i={};this.searchFields.forEach(n=>{const o=t[n.name];o&&(i[n.name]=o)}),this.excelService.exportApplicants(i).subscribe(n=>{this.downloadFile(n)})}exportApplicantsHeaders(){this.excelService.exportApplicantsHeader().subscribe(t=>{this.downloadFile(t)})}onFileSelected(t){this.file=t.target.files[0],this.selectedFileName=this.file?this.file.name:null}importApplicants(){this.file?this.excelService.importApplicantsHeader(this.file).subscribe(()=>{this.applicantTable(),this.file=null,this.selectedFileName=null},t=>{console.error("Error importing job descriptions:",t)}):console.error("No file selected")}downloadFile(t){const i=document.createElement("a");i.href=window.URL.createObjectURL(t),i.download="applicants_data.xlsx",i.click()}static#e=this.\u0275fac=function(i){return new(i||a)(e.Y36(x.uw),e.Y36(c.qu),e.Y36(Z.D),e.Y36(v.D),e.Y36(T.F0),e.Y36(C.y),e.Y36(O.v),e.Y36(d.F1),e.Y36(q.x),e.Y36(E.e),e.Y36(P.f))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-applicants"]],standalone:!0,features:[e.jDz],decls:66,vars:31,consts:[[1,"row"],[3,"cardTitle","options"],[1,"header"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"feather","icon-thumbs-up"],["class","d-flex align-items-center",4,"ngIf"],[1,"circles"],[1,"d-flex"],[1,"red"],[1,"d-flex",2,"margin-left","20px"],[1,"green"],[1,"card"],["activeIds","static-2",3,"closeOthers"],["id","static-1"],["ngbPanelTitle",""],["ngbPanelContent",""],[1,"table-responsive"],[1,"table"],[2,"text-align","center"],["type","checkbox",3,"change"],[1,"fas","fa-trash-alt","icon-position",3,"click"],[4,"ngFor","ngForOf"],[1,"pagination-controls","d-flex","justify-content-between"],[1,"d-flex","row"],[1,"col-md-auto","mt-auto","mb-auto"],[1,"",2,"width","100%"],[1,"col-md-auto"],[1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"mt-auto","mb-auto"],[1,"border-0","fs-4","bg-transparent",3,"disabled","click"],[1,"fa","fa-angle-double-left"],[1,"fa","fa-angle-left","bg-transparent"],[1,"fa","fa-angle-right"],[1,"fa","fa-angle-double-right"],[1,"d-flex","align-items-center"],[1,"btn","btn-primary","btn-file"],["type","file","accept",".xlsx,.xls",2,"display","none",3,"change"],[1,"feather","icon-upload"],["class","ml-2",4,"ngIf"],["type","button",1,"btn","btn-success","ml-2",3,"click"],[1,"feather","icon-download"],[1,"ml-2"],["href","javascript:"],[1,"col-md-12"],[3,"formGroup","ngSubmit"],["class","col-md-6 form-group",4,"ngFor","ngForOf"],["class","col-md-6 form-group",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-md-12","button-style"],["type","submit",1,"btn","btn-primary"],[1,"col-md-6","form-group"],[3,"for"],["class","form-control",3,"id","formControlName",4,"ngIf"],[1,"form-control",3,"id","formControlName"],["value","","selected",""],[3,"value"],[4,"ngIf","ngIfElse"],["certificateFields",""],["type","text",1,"form-control",3,"id","placeholder","formControlName"],["for","certificate"],["formGroupName","certificate"],["type","text","id","certificateGeneral","placeholder","General Certificate","formControlName","general",1,"form-control"],["type","text","id","certificatePrecise","placeholder","Precise Certificate","formControlName","precise",1,"form-control"],[1,"col-md-6","form-group",3,"formGroupName"],[1,"col-md-4"],[4,"ngIf"],["type","number","formControlName","min",1,"form-control",3,"id","placeholder"],["type","number","formControlName","max",1,"form-control",3,"id","placeholder"],[1,"col-md-8"],["type","number","formControlName","value",1,"form-control",3,"id","placeholder"],[2,"cursor","pointer","position","relative",3,"click"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["type","checkbox",3,"checked","change"],[1,"circles","padding-top"],["scope","row"],[1,"fas","fa-info-circle","hover",3,"click"],[1,"fas","fa-trash-alt","hover",3,"click"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"app-card",1),e.ALo(2,"translate"),e.TgZ(3,"div",2),e.YNc(4,D,4,3,"button",3),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.exportApplicantsData()}),e._UZ(6,"i",5),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"button",4),e.NdJ("click",function(){return n.exportApplicantsHeaders()}),e._UZ(10,"i",5),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.YNc(13,J,4,3,"button",3),e.YNc(14,N,4,3,"button",3),e.YNc(15,S,12,7,"div",6),e.TgZ(16,"div",7)(17,"div",8),e._UZ(18,"div",9),e.TgZ(19,"span"),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",10),e._UZ(23,"div",11),e.TgZ(24,"span"),e._uU(25),e.ALo(26,"translate"),e.qZA()()()(),e._UZ(27,"br")(28,"hr"),e.TgZ(29,"div",12)(30,"ngb-accordion",13)(31,"ngb-panel",14),e.YNc(32,I,3,3,"ng-template",15),e.YNc(33,z,13,11,"ng-template",16),e.qZA()()(),e._UZ(34,"br"),e.TgZ(35,"div",17)(36,"table",18)(37,"thead",19)(38,"tr")(39,"th")(40,"input",20),e.NdJ("change",function(l){return n.selectAll(l)}),e.qZA(),e.TgZ(41,"i",21),e.NdJ("click",function(){return n.deleteSelected()}),e.qZA()(),e.YNc(42,ae,3,2,"ng-container",22),e.qZA()(),e.TgZ(43,"tbody"),e.YNc(44,re,46,31,"tr",22),e.qZA()()(),e.TgZ(45,"div",23)(46,"div",24)(47,"div",25)(48,"span",26),e._uU(49,"Items Per Page:"),e.qZA()(),e.TgZ(50,"div",27)(51,"select",28),e.NdJ("ngModelChange",function(l){return n.pageSizeSelected=l})("change",function(){return n.changePageSize(n.pageSizeSelected)}),e.YNc(52,se,2,2,"option",29),e.qZA()()(),e.TgZ(53,"div",0)(54,"div",25)(55,"span",30),e._uU(56),e.qZA()(),e.TgZ(57,"div",25)(58,"button",31),e.NdJ("click",function(){return n.firstPage()}),e._UZ(59,"i",32),e.qZA(),e.TgZ(60,"button",31),e.NdJ("click",function(){return n.previousPage()}),e._UZ(61,"i",33),e.qZA(),e.TgZ(62,"button",31),e.NdJ("click",function(){return n.nextPage()}),e._UZ(63,"i",34),e.qZA(),e.TgZ(64,"button",31),e.NdJ("click",function(){return n.lastPage()}),e._UZ(65,"i",35),e.qZA()()()()()()),2&i&&(e.xp6(1),e.s9C("cardTitle",e.lcZ(2,21,"Basic Table")),e.Q6J("options",!1),e.xp6(3),e.Q6J("ngIf","Admin"===n.role||"User"===n.role&&1===n.permissions.addApplicants),e.xp6(3),e.hij(" ",e.lcZ(8,23,"Print")," "),e.xp6(4),e.hij(" ",e.lcZ(12,25,"Export Template")," "),e.xp6(2),e.Q6J("ngIf","Admin"===n.role||"User"===n.role&&1===n.permissions.sortable),e.xp6(1),e.Q6J("ngIf","Admin"===n.role||"User"===n.role&&1===n.permissions.sortable),e.xp6(1),e.Q6J("ngIf","Admin"===n.role||"User"===n.role&&1===n.permissions.addApplicants),e.xp6(5),e.Oqu(e.lcZ(21,27,"Not Sorted")),e.xp6(5),e.Oqu(e.lcZ(26,29,"Sorted")),e.xp6(5),e.Q6J("closeOthers",!0),e.xp6(12),e.Q6J("ngForOf",n.columnData),e.xp6(2),e.Q6J("ngForOf",n.paginateData()),e.xp6(7),e.Q6J("ngModel",n.pageSizeSelected),e.xp6(1),e.Q6J("ngForOf",n.pageSizes),e.xp6(4),e.AsE("",n.getRange()," of ",n.applicants.length,""),e.xp6(2),e.Q6J("disabled",1===n.currentPage),e.xp6(2),e.Q6J("disabled",1===n.currentPage),e.xp6(2),e.Q6J("disabled",n.currentPage===n.totalPages),e.xp6(2),e.Q6J("disabled",n.currentPage===n.totalPages))},dependencies:[_.ez,_.mk,_.sg,_.O5,_.rS,A.m,c._Y,c.YN,c.Kr,c.Fj,c.wV,c.EJ,c.JJ,c.JL,c.On,c.sg,c.u,c.x0,U.A,g.gY,g.Gk,g.Cu,g.gW,M.Hw,y.X$,c.u5,c.UX],styles:[".error-label[_ngcontent-%COMP%]{color:red}.circles[_ngcontent-%COMP%]   .red[_ngcontent-%COMP%]{background-color:red;width:15px;height:15px;border-radius:14px}.circles[_ngcontent-%COMP%]{display:flex}.circles[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{background-color:green;width:15px;height:15px;border-radius:14px}.circles[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:1rem;color:#000}.header[_ngcontent-%COMP%]{display:flex}.header[_ngcontent-%COMP%]   .circles[_ngcontent-%COMP%]{margin-left:5rem}.hover[_ngcontent-%COMP%]{cursor:pointer}th[_ngcontent-%COMP%]{position:relative;cursor:pointer}th[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{opacity:1}mat-icon[_ngcontent-%COMP%]{font-size:16px;vertical-align:middle;position:absolute;opacity:0;transition:opacity .3s ease}mat-icon.sorted[_ngcontent-%COMP%]{opacity:1}.padding-top[_ngcontent-%COMP%]{padding-top:.1rem}.icon-position[_ngcontent-%COMP%]{position:relative;left:15px;bottom:2px}"]})}return a})()}}]);